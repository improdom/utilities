BASE_VALUE_USD =
VAR selectedCobDate = SELECTEDVALUE('CoB Date'[CoB Date])
VAR selectedCobDateId = LOOKUPVALUE('CoB Date'[CoB Date ID], 'CoB Date'[CoB Date], selectedCobDate)

-- Check if data exists in the "In Memory" table for the selected date
VAR isInMemory = 
    CALCULATE(
        DISTINCTCOUNT('In Memory'[CoB Date ID]),
        KEEPFILTERS('In Memory'[CoB Date ID] = selectedCobDateId)
    ) > 0

RETURN 
    CALCULATE(
        SUM('Z Extended Model'[fact_value_usd]),
        FILTER(
            'Z Extended Model',
            -- Apply filter only when the data is NOT in memory
            NOT isInMemory && NOT ISBLANK('Z Extended Model'[fact_book_id])
        )
    )
